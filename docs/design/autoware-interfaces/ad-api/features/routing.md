# ルーティング

## 関連するAPI

- {{ link_ad_api('/api/routing/state') }}
- {{ link_ad_api('/api/routing/route') }}
- {{ link_ad_api('/api/routing/set_route_points') }}
- {{ link_ad_api('/api/routing/set_route') }}
- {{ link_ad_api('/api/routing/clear_route') }}

## 説明

このAPIは目的地と経由地を管理します。ウェイポイントは停止点のようなものではなく、単なる通過点であることに注意してください。
つまり、Autowareは複数の停止点があるルートをサポートしていないため、アプリケーションがそれを分割して切り替える必要があります。
ルートを設定するには2つの方法があります。1つはポーズを使用する一般的な方法で、もう1つはマップに依存する方法です。

## 状態

![経路状態](./routing/state.drawio.svg)

| 状態    | 説明                                        |
| -------- | -------------------------------------------------- |
| UNSET    | ルートは設定されていません。ルートリクエストを待っています。 |
| SET      | ルートが設定されています。                                 |
| ARRIVED  | 車は目的地に到着しました。        |
| CHANGING | ルートを変更しようとしています。まだ実装されていません。   |

## 目標の修正

Autowareは、目標に到達できない場合 (たとえば、指定された目標に障害物がある場合)、代替の目標を探しようとします。APIからルートを設定する場合、アプリケーションは、そのような状況でAutowareが目標姿勢を調整できるようにするかどうかを選択できます。falseに設定すると、指定された目標に到達するまでAutowareが停止する可能性があります。

| オプション                  | 説明                       |
| ----------------------- | --------------------------------- |
| allow_goal_modification | trueの場合、目標の変更を許可します。 |
