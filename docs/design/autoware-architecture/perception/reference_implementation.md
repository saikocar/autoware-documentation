# 知覚コンポーネントのリファレンス実装設計

## この文書の目的

このドキュメントでは、リファレンス実装の詳細な設計の概要を説明します。これにより、開発者とユーザーは、Perception コンポーネントで現在何が利用できるのか、その機能を利用、拡張、または追加する方法を理解できるようになります。

## アーキテクチャ

この図は、リファレンス実装のアーキテクチャを示しています。

![overall-perception-architecture](image/reference-implementaion-perception-diagram.drawio.svg)

知覚コンポーネントは次のサブコンポーネントで構成されます:

- **障害物セグメンテーション**: I自車両が回避すべき障害物 (動的オブジェクトだけでなく、静止障害物などの回避すべき静的障害物も含む) に由来する点群を識別します。たとえば、建設用コーンはこのモジュールを使用して認識されます。
- **占有グリッドマップ**: 死角 (情報が入手できず、動的オブジェクトが飛び出す可能性のある領域) を検出します。
- **物体認識**: 現在のフレーム内で自車両の周囲にある動的物体を認識し、それらの将来の軌道を予測します。
  - **検出**: 車両や歩行者などの動的物体の姿勢と速度を検出します。
    - **検出器**: オブジェクト検出処理をフレームごとにトリガーします。
    - **補間器**: 安定した物体検出を維持します。検出器からの出力が突然利用できなくなった場合でも、補間器は追跡モジュールからの出力を使用して、オブジェクトを見逃すことなく検出結果を維持します。
  - **追跡**: 複数のフレームにわたる検出結果を関連付けます。
  - **予測**: 動的オブジェクトの軌道を予測します。
- **信号機認識**: 信号機の色と矢印信号の方向を認識します。

### 認識コンポーネントの内部インターフェイス

- **障害物のセグメンテーションから物体認識へ**
  - 点群: 在のフレームで観察された点群で、地面と外れ値が削除されています。
- **障害物セグメンテーションから占有グリッドマップへ**
  - 地面フィルターされた点群: 現在のフレームで観察され、地面が削除された点群。
- **障害物セグメンテーションへの占有グリッドマップ**
  - 占有グリッドマップ: これは外れ値をフィルタリングするために使用されます。
